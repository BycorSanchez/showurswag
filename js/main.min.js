document.addEventListener("DOMContentLoaded",function(){let e=document.body,t=document.getElementById("logo"),n=document.getElementById("dropzone"),r=document.getElementById("fileInput"),a=document.getElementById("upload-screen"),s=document.getElementById("swagger-screen"),d=document.getElementById("backButton"),l=new URLSearchParams(window.location.search),o=l.get("swag");if(o)try{let i=LZString.decompressFromEncodedURIComponent(o);g(JSON.parse(i))}catch(c){console.error("Error loading Swagger from URL",c)}function g(t){e.classList.add("default-background"),a.classList.add("hidden"),s.classList.remove("hidden"),SwaggerUIBundle({spec:t,dom_id:"#swagger-container"});let n=LZString.compressToEncodedURIComponent(JSON.stringify(t));history.replaceState(null,"",`?swag=${n}`)}function f(e){let t=new FileReader;t.onload=function(t){try{let n;if(e.name.endsWith(".yaml")||e.name.endsWith(".yml"))n=jsyaml.load(t.target.result);else if(e.name.endsWith(".json"))n=JSON.parse(t.target.result);else{m("Only YAML or JSON files allowed.");return}g(n)}catch(r){m("There was an error processing the file. Please check its format or content.")}},t.readAsText(e)}function m(e){n.textContent=e,n.classList.add("error"),setTimeout(function(){n.textContent="Drag & drop your YAML/JSON file here or click to select one",n.classList.remove("error")},5e3)}t.addEventListener("contextmenu",e=>{e.preventDefault()}),r.addEventListener("change",e=>{e.target.files.length>0&&(f(e.target.files[0]),e.target.value=null)}),n.addEventListener("click",()=>r.click()),n.addEventListener("dragover",e=>{e.preventDefault(),n.classList.add("dragover")}),n.addEventListener("drop",e=>{e.preventDefault(),n.classList.remove("dragover"),e.dataTransfer.files.length>0&&f(e.dataTransfer.files[0])}),d.addEventListener("click",()=>{history.replaceState(null,"",window.location.pathname),s.classList.add("hidden"),a.classList.remove("hidden"),e.classList.remove("default-background")})});